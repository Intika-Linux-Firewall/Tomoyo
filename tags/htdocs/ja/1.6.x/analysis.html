<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja-JP">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
<meta http-equiv="Content-Style-Type" content="text/css">
<title>TOMOYO Linuxによるアクセス解析手順</title>
<link rel="stylesheet" href="tomoyo.css" media="all" type="text/css">
</head>
<body>
<p style="text-align:right;"><a href="../../en/1.6.x/analysis.html">English Page</a></p>
<h1>TOMOYO Linuxによるアクセス解析手順</h1>
<p style="text-align:right;">Last modified: $Date$</p>

<p>TOMOYO Linux のポリシーはパス名で表現されるため、ファイルのアクセスを追跡するためにも利用できます。<br>
特定のプログラムがどのようなファイルにアクセスしているかを知りたい場合や、特定のディレクトリにファイルを作成しているプログラムを知りたい場合に利用できます。</p>

<h1>準備</h1>

<h2>TOMOYO Linux カーネルのインストール</h2>

<p>バイナリパッケージはまだ提供されていません。<a href="compile.html">TOMOYO Linuxカーネルの作成手順</a>を参照しながらカーネルをコンパイルする必要があります。</p>

<h2>TOMOYO Linux ツールのインストール</h2>

<p>バイナリパッケージはまだ提供されていません。以下の手順でツールをコンパイルする必要があります。</p>

<table border="1">
<tr><td>
wget http://osdn.dl.sourceforge.jp/tomoyo/30298/ccs-tools-1.6.0-20080401.tar.gz<br>
tar -zxf ccs-tools-1.6.0-20080401.tar.gz<br>
make -C ccstools/ install
</td></tr>
</table>

<h2>ポリシーの作成</h2>

<p>/etc/ccs/profile.conf を作成し、以下の内容を指定します。</p>

<table border="1">
<tr><td>
MAC_FOR_FILE=1<BR>
MAX_ACCEPT_ENTRY=1048576<BR>
MAX_GRANT_LOG=0<BR>
MAX_REJECT_LOG=0<BR>
TOMOYO_VERBOSE=0<BR>
</td></tr>
</table>

<p>以下のコマンドを実行してください。</p>

<table border="1">
<tr><td>
/usr/lib/ccs/init_policy.sh
</td></tr>
</table>

<h1>解析</h1>

<p>TOMOYO Linuxカーネルで起動します。

<p>解析したいアプリケーションを動作させます。</p>

<p>/usr/lib/ccs/editpolicy を実行すると、現在に至るまでに実行されたプログラムの一覧を表示できます。プログラムを選択して Enter を押すと、そのプログラムがアクセスしたファイルの一覧が表示されます。ポリシーエディタの使い方については、<a href="tool-editpolicy.html">ポリシーエディタの使い方</a>を参照してください。</p>

<p>/usr/lib/ccs/savepolicy を実行すると、現在に至るまでにアクセスされたファイルの一覧を /etc/ccs/domain_policy.conf に保存することができます。</p>
<p><a href="http://sourceforge.jp/"><img src="http://sourceforge.jp/sflogo.php?group_id=1973" width="96" height="31" alt="SourceForge.jp"></a></p>
</body>
</html>
