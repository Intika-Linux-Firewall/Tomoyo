<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<meta http-equiv="Content-Style-Type" content="text/css">
<title>TOMOYO Linux kernel compilation</title>
<link rel="stylesheet" href="tomoyo.css" media="all" type="text/css">
</head>
<body>
<p style="text-align:right;"><a href="../../ja/1.6.x/compile.html">Japanese Page</a></p>
<h1>TOMOYO Linux kernel compilation</h1>
<p style="text-align:right;">Last modified: $Date$</p>

<p>To compile kernel, the following packages are needed.</p>

<ul>
<li>gcc</li>
<li>make</li>
<li>ncurses</li>
</ul>

<p>Run "make menuconfig" and choose the following options in "File systems" section.</p>

<ul>
<li>[*] SAKURA (Domain-Free Mandatory Access Control) support
<li>[*] TOMOYO (Domain-Based Mandatory Access Control) support
<li>&lt;m&gt; SYAORAN (Tamper-Proof Device Filesystem) support
</ul>

<p>The 2.6 kernels has a compilation option named CONFIG_DEBUG_INFO. If this option is enabled, the compiled code's size becomes about 10 times larger. Enabling this option consumes about 1 GB of extra disk space for /usr/src/ directory and about 300 MB of extra disk space for /lib/modules/ directory.<br>
To save disk space, disable the following option.</p>

<table border="1">
<tr><td>
Kernel hacking ---&gt;[&nbsp;] &nbsp;&nbsp;Compile the kernel with debug info
</td></tr>
</table>

<p>Choose the version you want to use from the following list.</p>

<ul>
<li><a href="#2.4.20-46.9.legacy">Kernel 2.4.20-46.9.legacy for RedHat Linux 9</a>
<li><a href="#2.6.12-2.3.legacy_FC3">Kernel 2.6.12-2.3.legacy_FC3 for Fedora Core 3</a>
<li><a href="#2.6.17-1.2142_FC4">Kernel 2.6.17-1.2142_FC4 for Fedora Core 4</a>
<li><a href="#2.6.20-1.2320.fc5">Kernel 2.6.20-1.2320.fc5 for Fedora Core 5</a>
<li><a href="#2.6.22.14-72.fc6">Kernel 2.6.22.14-72.fc6 for Fedora Core 6</a>
<li><a href="#2.6.23.15-80.fc7">Kernel 2.6.23.15-80.fc7 for Fedora 7</a>
<li><a href="#2.6.23.15-137.fc8">Kernel 2.6.23.15-137.fc8 for Fedora 8</a>
<li><a href="#2.6.9-67.0.4.EL">Kernel 2.6.9-67.0.4.EL for CentOS 4.6</a>
<li><a href="#2.6.18-53.1.13.el5">Kernel 2.6.18-53.1.13.el5 for CentOS 5.1</a>
<li><a href="#2.4.27-10sarge6">Kernel 2.4.27-10sarge6 for Debian Sarge</a>
<li><a href="#2.6.8-17sarge1">Kernel 2.6.8-17sarge1 for Debian Sarge</a>
<li><a href="#2.6.18-18etch1">Kernel 2.6.18-18etch1 for Debian Etch</a>
<li><a href="#2.6.22-6.lenny1">Kernel 2.6.22-6.lenny1 for Debian Lenny</a>
<li><a href="#2.6.16.54-0.2.5">Kernel 2.6.16.54-0.2.5 for OpenSUSE 10.1</a>
<li><a href="#2.6.18.8-0.9">Kernel 2.6.18.8-0.9 for OpenSUSE 10.2</a>
<li><a href="#2.6.22.17-0.1">Kernel 2.6.22.17-0.1 for OpenSUSE 10.3</a>
<li><a href="#2.6.9-42.18AX">Kernel 2.6.9-42.18AX for Asianux 2.0</a>
<li><a href="#2.6.18-8.12AX">Kernel 2.6.18-8.12AX for Asianux 3.0</a>
<li><a href="#2.6.17.14-ubuntu1">Kernel 2.6.17.14-ubuntu1 for Ubuntu 6.10</a>
<li><a href="#2.6.20.3-ubuntu1">Kernel 2.6.20.3-ubuntu1 for Ubuntu 7.04</a>
<li><a href="#2.6.16-0vl76.28">Kernel 2.6.16-0vl76.28 for VineLinux 4.2</a>
<li><a href="#2.6-vanilla">Vanilla 2.6 kernels</a>
<li><a href="#2.4-vanilla">Vanilla 2.4 kernels</a>
</ul>

<hr>

<h2><a name="2.4.20-46.9.legacy">Kernel 2.4.20-46.9.legacy for RedHat Linux 9</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
wget http://ftp.riken.jp/Linux/fedoralegacy/redhat/9/updates/i386/kernel-source-2.4.20-46.9.legacy.i386.rpm<br>
rpm -ivh kernel-source-2.4.20-46.9.legacy.i386.rpm<br>
# Move to the source directory.<br>
cd /usr/src/linux-2.4.20-46.9.legacy/<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.4.20-46.9.legacy.diff<br>
# Remove all temporary files but configuration file.<br>
mv .config config<br>
make -s distclean<br>
mv config .config<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s dep modules modules_install install
</td></tr>
</table>

<h2><a name="2.6.12-2.3.legacy_FC3">Kernel 2.6.12-2.3.legacy_FC3 for Fedora Core 3</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
wget http://ftp.riken.jp/Linux/fedoralegacy/fedora/3/updates/SRPMS/kernel-2.6.12-2.3.legacy_FC3.src.rpm<br>
rpm -ivh kernel-2.6.12-2.3.legacy_FC3.src.rpm<br>
# Prepare for compilation.<br>
rpmbuild -bp --target i586 /usr/src/redhat/SPECS/kernel-2.6.spec<br>
mv /usr/src/redhat/BUILD/kernel-2.6.12/linux-2.6.12/ /usr/src/linux-2.6.12-2.3.legacy_FC3<br>
# Move to the source directory.<br>
cd /usr/src/linux-2.6.12-2.3.legacy_FC3/<br>
# Modify version number.<br>
sed -i 's/EXTRAVERSION = -prep/EXTRAVERSION = -2.3.legacy_FC3/' Makefile<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.6.12-2.3.legacy_FC3.diff<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s modules modules_install install
</td></tr>
</table>

<h2><a name="2.6.17-1.2142_FC4">Kernel 2.6.17-1.2142_FC4 for Fedora Core 4</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
wget http://download.fedora.redhat.com/pub/fedora/linux/core/updates/4/SRPMS/kernel-2.6.17-1.2142_FC4.src.rpm<br>
rpm -ivh kernel-2.6.17-1.2142_FC4.src.rpm<br>
# Prepare for compilation.<br>
rpmbuild -bp --target i586 /usr/src/redhat/SPECS/kernel-2.6.spec<br>
mv /usr/src/redhat/BUILD/kernel-2.6.17/linux-2.6.17/ /usr/src/linux-2.6.17-1.2142_FC4<br>
# Move to the source directory.<br>
cd /usr/src/linux-2.6.17-1.2142_FC4/<br>
# Modify version number.<br>
sed -i 's/EXTRAVERSION = -prep/EXTRAVERSION = -1.2142_FC4/' Makefile<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.6.17-1.2142_FC4.diff<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s<br>
make -s modules modules_install install
</td></tr>
</table>

<h2><a name="2.6.20-1.2320.fc5">Kernel 2.6.20-1.2320.fc5 for Fedora Core 5</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
wget http://download.fedora.redhat.com/pub/fedora/linux/core/updates/5/SRPMS/kernel-2.6.20-1.2320.fc5.src.rpm<br>
rpm -ivh kernel-2.6.20-1.2320.fc5.src.rpm<br>
# Prepare for compilation.<br>
rpmbuild -bp --target i586 /usr/src/redhat/SPECS/kernel-2.6.spec<br>
mv /usr/src/redhat/BUILD/kernel-2.6.20/linux-2.6.20.i586/ /usr/src/linux-2.6.20-1.2320.fc5<br>
# Move to the source directory.<br>
cd /usr/src/linux-2.6.20-1.2320.fc5/<br>
# Modify version number.<br>
sed -i 's/EXTRAVERSION = -prep/EXTRAVERSION = -1.2320.fc5/' Makefile<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.6.20-1.2320.fc5.diff<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s<br>
make -s modules modules_install install
</td></tr>
</table>

<h2><a name="2.6.22.14-72.fc6">Kernel 2.6.22.14-72.fc6 for Fedora Core 6</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
wget http://download.fedora.redhat.com/pub/fedora/linux/core/updates/6/SRPMS/kernel-2.6.22.14-72.fc6.src.rpm<br>
rpm -ivh kernel-2.6.22.14-72.fc6.src.rpm<br>
# Prepare for compilation.<br>
rpmbuild -bp --target i586 /usr/src/redhat/SPECS/kernel-2.6.spec<br>
mv /usr/src/redhat/BUILD/kernel-2.6.22/linux-2.6.22.i586/ /usr/src/linux-2.6.22.14-72.fc6<br>
# Move to the source directory.<br>
cd /usr/src/linux-2.6.22.14-72.fc6/<br>
# Modify version number.<br>
sed -i 's/EXTRAVERSION = -prep/EXTRAVERSION = .14-72.fc6/' Makefile<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.6.22.14-72.fc6.diff<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s<br>
make -s modules modules_install install
</td></tr>
</table>

<h2><a name="2.6.23.15-80.fc7">Kernel 2.6.23.15-80.fc7 for Fedora 7</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
wget http://download.fedora.redhat.com/pub/fedora/linux/updates/7/SRPMS/kernel-2.6.23.15-80.fc7.src.rpm<br>
rpm -ivh kernel-2.6.23.15-80.fc7.src.rpm<br>
# Prepare for compilation.<br>
rpmbuild -bp --target i586 /usr/src/redhat/SPECS/kernel-2.6.spec<br>
mv /usr/src/redhat/BUILD/kernel-2.6.23/linux-2.6.23.i586/ /usr/src/linux-2.6.23.15-80.fc7<br>
# Move to the source directory.<br>
cd /usr/src/linux-2.6.23.15-80.fc7/<br>
# Modify version number.<br>
sed -i 's/EXTRAVERSION = -prep/EXTRAVERSION = .15-80.fc7/' Makefile<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.6.23.15-80.fc7.diff<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s<br>
make -s modules modules_install install
</td></tr>
</table>

<h2><a name="2.6.23.15-137.fc8">Kernel 2.6.23.15-137.fc8 for Fedora 8</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
wget http://download.fedora.redhat.com/pub/fedora/linux/updates/8/SRPMS/kernel-2.6.23.15-137.fc8.src.rpm<br>
rpm -ivh kernel-2.6.23.15-137.fc8.src.rpm<br>
# Prepare for compilation.<br>
rpmbuild -bp --target i586 /usr/src/redhat/SPECS/kernel.spec<br>
mv /usr/src/redhat/BUILD/kernel-2.6.23/linux-2.6.23.i586/ /usr/src/linux-2.6.23.15-137.fc8<br>
# Move to the source directory.<br>
cd /usr/src/linux-2.6.23.15-137.fc8/<br>
# Modify version number.<br>
sed -i 's/EXTRAVERSION = -prep/EXTRAVERSION = .15-137.fc8/' Makefile<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.6.23.15-137.fc8.diff<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s<br>
make -s modules modules_install install
</td></tr>
</table>

<h2><a name="2.6.9-67.0.4.EL">Kernel 2.6.9-67.0.4.EL for CentOS 4.6</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
wget http://mirrors.kernel.org/centos/4.6/updates/SRPMS/kernel-2.6.9-67.0.4.EL.src.rpm<br>
rpm -ivh kernel-2.6.9-67.0.4.EL.src.rpm<br>
# Prepare for compilation.<br>
rpmbuild -bp --target i586 /usr/src/redhat/SPECS/kernel-2.6.spec<br>
mv /usr/src/redhat/BUILD/kernel-2.6.9/linux-2.6.9/ /usr/src/linux-2.6.9-67.0.4.EL<br>
# Move to the source directory.<br>
cd /usr/src/linux-2.6.9-67.0.4.EL/<br>
# Modify version number.<br>
sed -i 's/EXTRAVERSION = -prep/EXTRAVERSION = -67.0.4.EL/' Makefile<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.6.9-67.0.4.EL.diff<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s<br>
make -s modules modules_install install
</td></tr>
</table>

<h2><a name="2.6.18-53.1.13.el5">Kernel 2.6.18-53.1.13.el5 for CentOS 5.1</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
wget http://mirrors.kernel.org/centos/5.1/updates/SRPMS/kernel-2.6.18-53.1.13.el5.src.rpm<br>
rpm -ivh kernel-2.6.18-53.1.13.el5.src.rpm<br>
# Prepare for compilation.<br>
rpmbuild -bp --target i686 /usr/src/redhat/SPECS/kernel-2.6.spec<br>
mv /usr/src/redhat/BUILD/kernel-2.6.18/linux-2.6.18.i686/ /usr/src/linux-2.6.18-53.1.13.el5<br>
# Move to the source directory.<br>
cd /usr/src/2.6.18-53.1.13.el5/<br>
# Modify version number.<br>
sed -i 's/EXTRAVERSION = -prep/EXTRAVERSION = -53.1.13.el5/' Makefile<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.6.18-53.1.13.el5.diff<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s<br>
make -s modules modules_install install
</td></tr>
</table>

<h2><a name="2.4.27-10sarge6">Kernel 2.4.27-10sarge6 for Debian Sarge</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
apt-get install kernel-source-2.4.27<br>
tar -jxf /usr/src/kernel-source-2.4.27.tar.bz2<br>
# Move to the source directory.<br>
cd kernel-source-2.4.27/<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.4.27-10sarge6.diff<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s dep install modules modules_install<br>
# Create initrd.<br>
mkinitrd -o /boot/initrd.img-2.4.27-10sarge6-ccs 2.4.27-10sarge6-ccs
</td></tr>
</table>

<h2><a name="2.6.8-17sarge1">Kernel 2.6.8-17sarge1 for Debian Sarge</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
apt-get install kernel-source-2.6.8<br>
tar -jxf /usr/src/kernel-source-2.6.8.tar.bz2<br>
# Move to the source directory.<br>
cd kernel-source-2.6.8/<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.6.8-17sarge1.diff<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s<br>
make -s install modules modules_install<br>
# Create initrd.<br>
mkinitrd -o /boot/initrd.img-2.6.8-17sarge1-ccs 2.6.8-17sarge1-ccs
</td></tr>
</table>

<h2><a name="2.6.18-18etch1">Kernel 2.6.18-18etch1 for Debian Etch</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
apt-get install linux-source-2.6.18<br>
tar -jxf /usr/src/linux-source-2.6.18.tar.bz2<br>
# Move to the source directory.<br>
cd linux-source-2.6.18/<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.6.18-18etch1.diff<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s<br>
make -s install modules modules_install<br>
# Create initrd.<br>
mkinitrd -o /boot/initrd.img-2.6.18-18etch1-ccs 2.6.18-18etch1-ccs
</td></tr>
</table>

<h2><a name="2.6.22-6.lenny1">Kernel 2.6.22-6.lenny1 for Debian Lenny</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
apt-get install linux-source-2.6.22<br>
tar -jxf /usr/src/linux-source-2.6.22.tar.bz2<br>
# Move to the source directory.<br>
cd linux-source-2.6.22/<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.6.22-6.lenny1.diff<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s<br>
make -s install modules modules_install<br>
# Create initrd.<br>
mkinitrd -o /boot/initrd.img-2.6.22-6.lenny1-ccs 2.6.22-6.lenny1-ccs
</td></tr>
</table>

<h2><a name="2.6.16.54-0.2.5">Kernel 2.6.16.54-0.2.5 for OpenSUSE 10.1</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
wget http://ftp.novell.co.jp/pub/suse/suse/update/10.1/rpm/i586/kernel-source-2.6.16.54-0.2.5.i586.rpm<br>
rpm -ivh kernel-source-2.6.16.54-0.2.5.i586.rpm<br>
# Move to the source directory.<br>
cd /usr/src/linux-2.6.16.54-0.2.5/<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.6.16.54-0.2.5_SUSE.diff<br>
# Move to the output directory.<br>
cd /usr/src/linux-2.6.16.54-0.2.5-obj/i386/default/<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s<br>
make -s modules modules_install install
</td></tr>
</table>

<h2><a name="2.6.18.8-0.9">Kernel 2.6.18.8-0.9 for OpenSUSE 10.2</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
wget http://ftp.novell.co.jp/pub/suse/suse/update/10.2/rpm/i586/kernel-source-2.6.18.8-0.9.i586.rpm<br>
rpm -ivh kernel-source-2.6.18.8-0.9.i586.rpm<br>
# Move to the source directory.<br>
cd /usr/src/linux-2.6.18.8-0.9/<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.6.18.8-0.9_SUSE.diff<br>
# Move to the output directory.<br>
cd /usr/src/linux-2.6.18.8-0.9-obj/i386/default/<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s<br>
make -s modules modules_install install
</td></tr>
</table>

<h2><a name="2.6.22.17-0.1">Kernel 2.6.22.17-0.1 for OpenSUSE 10.3</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
wget http://ftp.novell.co.jp/pub/suse/opensuse/update/10.3/rpm/i586/kernel-source-2.6.22.17-0.1.i586.rpm<br>
rpm -ivh kernel-source-2.6.22.17-0.1.i586.rpm<br>
# Move to the source directory.<br>
cd /usr/src/linux-2.6.22.17-0.1/<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.6.22.17-0.1_SUSE.diff<br>
# Move to the output directory.<br>
cd /usr/src/linux-2.6.22.17-0.1-obj/i386/default/<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s<br>
make -s modules modules_install install
</td></tr>
</table>

<h2><a name="2.6.9-42.18AX">Kernel 2.6.9-42.18AX for Asianux 2.0</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
wget http://ftp.miraclelinux.com/pub/Miracle/ia32/standard/4.0/updates/SRPMS/kernel-2.6.9-42.18AX.src.rpm<br>
rpm -ivh kernel-2.6.9-42.18AX.src.rpm<br>
# Prepare for compilation.<br>
rpmbuild -bp --target i686 /usr/src/asianux/SPECS/kernel-2.6.spec<br>
mv /usr/src/asianux/BUILD/kernel-2.6.9/linux-2.6.9/ /usr/src/linux-2.6.9-42.18AX<br>
# Move to the source directory.<br>
cd /usr/src/linux-2.6.9-42.18AX/<br>
# Modify version number.<br>
sed -i 's/EXTRAVERSION = -prep/EXTRAVERSION = -42.18AX/' Makefile<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.6.9-42.18AX.diff<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s<br>
make -s modules modules_install install
</td></tr>
</table>

<h2><a name="2.6.18-8.12AX">Kernel 2.6.18-8.12AX for Asianux 3.0</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
wget http://ftp.miraclelinux.com/pub/Asianux/Server/3.0/updates/src/kernel-2.6.18-8.12AX.src.rpm<br>
rpm -ivh kernel-2.6.18-8.12AX.src.rpm<br>
# Prepare for compilation.<br>
rpmbuild -bp --target i686 /usr/src/asianux/SPECS/kernel-2.6.spec<br>
mv /usr/src/asianux/BUILD/kernel-2.6.18/linux-2.6.18/ /usr/src/linux-2.6.18-8.12AX<br>
# Move to the source directory.<br>
cd /usr/src/linux-2.6.18-8.12AX/<br>
# Modify version number.<br>
sed -i 's/EXTRAVERSION = -prep/EXTRAVERSION = -8.12AX/' Makefile<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.6.18-8.12AX.diff<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s<br>
make -s modules modules_install install
</td></tr>
</table>

<h2><a name="2.6.17.14-ubuntu1">Kernel 2.6.17.14-ubuntu1 for Ubuntu 6.10</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
apt-get install linux-source-2.6.17<br>
tar -jxf /usr/src/linux-source-2.6.17.tar.bz2<br>
# Move to the source directory.<br>
cd linux-source-2.6.17/<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.6.17.14-ubuntu1.diff<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s<br>
make -s install modules modules_install<br>
# Create initramfs.<br>
mkinitramfs -o /boot/initrd.img-2.6.17.14-ubuntu1-ccs 2.6.17.14-ubuntu1-ccs
</td></tr>
</table>

<h2><a name="2.6.20.3-ubuntu1">Kernel 2.6.20.3-ubuntu1 for Ubuntu 7.04</a></h2>

<table border="1">
<tr><td>
# Download and install kernel source.<br>
apt-get install linux-source-2.6.20<br>
tar -jxf /usr/src/linux-source-2.6.20.tar.bz2<br>
# Move to the source directory.<br>
cd linux-source-2.6.20/<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.6.20.3-ubuntu1.diff<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s<br>
make -s install modules modules_install<br>
# Create initramfs.<br>
mkinitramfs -o /boot/initrd.img-2.6.20.3-ubuntu1-ccs 2.6.20.3-ubuntu1-ccs
</td></tr>
</table>

<h2><a name="2.6.16-0vl76.28">Kernel 2.6.16-0vl76.28 for VineLinux 4.2</a></h2>

<table border="1">
<tr><td>
# Create a symlink to avoid errors upon "make install".<br>
ln -s /bin/true /sbin/lilo<br>
# Download and install kernel source.<br>
apt-get install kernel-source<br>
# Move to the source directory.<br>
cd /usr/src/linux-2.6.16/<br>
# Download and apply TOMOYO Linux patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
tar -zxf ccs-patch.tar.gz<br>
patch -sp1 &lt; patches/ccs-patch-2.6.16-0vl76.28.diff<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s<br>
make -s modules modules_install install<br>
# Create initrd.<br>
mkinitrd /boot/initrd.img-2.6.16-0vl76.28-ccs 2.6.16-0vl76.28-ccs<br>
# Update symlinks.<br>
ln -sf /boot/vmlinuz-2.6.16-0vl76.28-ccs /boot/vmlinuz<br>
ln -sf /boot/initrd.img-2.6.16-0vl76.28-ccs /boot/initrd.img<br>
ln -sf /boot/System.map-2.6.16-0vl76.28-ccs /boot/System.map
</td></tr>
</table>

<h2><a name="2.6-vanilla">Vanilla 2.6 kernels</a></h2>

<p>2.6.11 and later are supported. The following is the case of version 2.6.24 .</p>

<table border="1">
<tr><td>
# Create a directory where the kernel modules are installed.<br>
mkdir -p /lib/modules/2.6.24-ccs<br>
# Move to the source directory.<br>
cd /usr/src/<br>
# Download kernel source.<br>
wget http://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.24.tar.bz2<br>
# Extract.<br>
tar -jxf linux-2.6.24.tar.bz2<br>
# Move to the extracted directory.<br>
cd linux-2.6.24<br>
# Remove world writable permissions from the source code.<br>
find -print0 | xargs -0 chmod go-w --<br>
# Download TOMOYO Linux's kernel patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
# Extract.<br>
tar -zxf ccs-patch.tar.gz<br>
# Apply the kernel patch.<br>
patch -sp1 &lt; patches/ccs-patch-2.6.24.diff<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s<br>
make -s install modules modules_install
</td></tr>
</table>

<h2><a name="2.4-vanilla">Vanilla 2.4 kernels</a></h2>

<p>2.4.30 and later are supported. The following is the case of version 2.4.36 .</p>

<table border="1">
<tr><td>
# Create a directory where the kernel modules are installed.<br>
mkdir -p /lib/modules/2.4.36-ccs<br>
# Move to the source directory.<br>
cd /usr/src/<br>
# Download kernel source.<br>
wget http://www.kernel.org/pub/linux/kernel/v2.4/linux-2.4.36.tar.bz2<br>
# Extract.<br>
tar -jxf linux-2.4.36.tar.bz2<br>
# Move to the extracted directory.<br>
cd linux-2.4.36<br>
# Remove world writable permissions from the source code.<br>
find -print0 | xargs -0 chmod go-w --<br>
# Download TOMOYO Linux's kernel patch.<br>
wget -O - 'http://svn.sourceforge.jp/cgi-bin/viewcvs.cgi/trunk/1.6.x/ccs-patch.tar.gz?root=tomoyo&view=tar' | tar -zxf - ; tar -zcf ccs-patch.tar.gz -C ccs-patch/ .<br>
# Extract.<br>
tar -zxf ccs-patch.tar.gz<br>
# Apply the kernel patch.<br>
patch -sp1 &lt; patches/ccs-patch-2.4.36.diff<br>
# Enable options for TOMOYO Linux.<br>
make -s menuconfig<br>
# Compile as usual.<br>
make -s dep<br>
make -s<br>
make -s modules modules_install install
</td></tr>
</table>

</body>
</html>
