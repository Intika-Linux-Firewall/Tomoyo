<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<meta http-equiv="Content-Style-Type" content="text/css">
<title>TOMOYO Linux Install manual</title>
<link rel="stylesheet" href="http://tomoyo.sourceforge.jp/tomoyo.css" media="all" type="text/css">
</head>
<body>
<p style="text-align:right;"><a href="install.html.ja">Japanese Page</a></p>
<p style="text-align:right;">Last modified: $Date: 2009-07-20 15:20:25 +0900 (Mon, 20 Jul 2009) $</p>
<h1>Phase 1: Installing TOMOYO Linux kernels and tools.</h1>

<p>This page describes how to install TOMOYO Linux's kernel and userland tools.</p>

<hr>

<h2>Step 1: Compiling the kernel.</h2>

<p>NOTE: If you are using one of Ubuntu 9.10 and later, Debian Squeeze and later, Mandriva Linux 2010.0 and later, you don't need to compile kernel because TOMOYO Linux is already built into their kernels. Adding security=tomoyo to kernel's command line parameters will enable TOMOYO Linux.</p>

<p>To compile kernel, the following packages are needed.</p>

<ul>
<li>gcc</li>
<li>make</li>
<li>ncurses</li>
</ul>

<p>Download source code from "<a href="http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=summary">linux-2.6 git tree</a>" or "<a href="http://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.34.1.tar.bz2">linux-2.6.34.1.tar.bz2</a>" and extract it.</p>

<p>Next, create a kernel config with TOMOYO Linux enabled.</p>

<table border="1">
<tr><td>
[user@tomoyo ~]$ make -s menuconfig
</td></tr>
</table>

<p>Go to "Security options" screen and select "Enable different security models" and "TOMOYO Linux Support".</p>

<pre>
[&nbsp;] Enable access key retention support
[*] Enable different security models
-*- Enable the securityfs filesystem
[&nbsp;] Socket and Networking Security Hooks
-*- Security hooks for pathname based access control
[&nbsp;] File POSIX Capabilities
(0) Low address space to protect from user allocation
[*] TOMOYO Linux Support
</pre>

<p>After creating a kernel config, compile the kernel.</p>

<table border="1">
<tr><td>
[user@tomoyo ~]$ make -s<br>
[user@tomoyo ~]$ su<br>
[root@tomoyo ~]# make -s modules_install install
</td></tr>
</table>

<p>Create initrd if you need.</p>

<p>Edit /boot/grub/grub.conf or /boot/grub/menu.lst to add security=tomoyo to the kernel command line parameters.</p>

<hr>

<h2>Step 2: Installing the tools package.</h2>

<p>To compile tool, run the following commands.</p>

<table border="1">
<tr><td>
[root@tomoyo ~]# wget http://sourceforge.jp/frs/redir.php?f=/tomoyo/41908/tomoyo-tools-2.2.0-20100225.tar.gz<br>
[root@tomoyo ~]# tar -zxf tomoyo-tools-2.2.0-20100225.tar.gz<br>
[root@tomoyo ~]# make -C tomoyo-tools/ install
</td></tr>
</table>

<!--
<p>If you are using Gentoo, you can do "emerge ccs-tools".</p>

<p>If you are using Debian Sid or Ubuntu 9.10, you may be able to find the package by "apt-get install tomoyo-ccstools". But be sure to check that the version is 1.6.8 and later.</p>
-->

<hr>

<p><a href="index.html.en">Return to index page.</a></p>
<p><a href="http://sourceforge.jp/"><img src="http://sourceforge.jp/sflogo.php?group_id=1973" width="96" height="31" alt="SourceForge.jp"></a></p>
</body>
</html>
