<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<meta http-equiv="Content-Style-Type" content="text/css">
<title>Tools Documentation</title>
<link rel="stylesheet" href="https://tomoyo.osdn.jp/tomoyo.css" media="all" type="text/css">
</head>
<body>
<p>This page is for TOMOYO 2.3 (for Linux 2.6.36 and later kernels). Please jump to <a href="../2.2/">this page</a> for TOMOYO 2.2 (for Linux 2.6.30 - 2.6.35 kernels).</p>
<p style="text-align:right;"><a href="tools-doc.html.ja">Japanese Page</a></p>
<p style="text-align:right;">Last modified: $Date$</p>
<h1>Tools Documentation</h1>

<hr>

<h2><a name="administration_tool">&lt;&lt;Tools for system administrators&gt;&gt;</a></h2>

<h3><a name="tomoyo-editpolicy">&lt;Policy Editor "tomoyo-editpolicy"&gt;</a></h3>
<p>Edits the current policy in /sys/kernel/security/tomoyo/ directory.</p>
<p>You may give one of 'e' 'd' 'p' 'm' 'u' to the commandline to choose the initial screen. If not given, screen for domain listing is shown.</p>
<p>You can use keys listed below.</p>

<p>&lt;Scroll&gt;</p>
<table border="1">
<tr><td>Up-arrow</td><td>Scroll 1 line up.</td></tr>
<tr><td>Down-arrow</td><td>Scroll 1 line down.</td></tr>
<tr><td>PageUp</td><td>Scroll 1 page up.</td></tr>
<tr><td>PageDown</td><td>Scroll 1 page down.</td></tr>
<tr><td>Right-arrow</td><td>Scroll 1 column right.</td></tr>
<tr><td>Left-arrow</td><td>Scroll 1 column left.</td></tr>
<tr><td>Home</td><td>Move to the top of line.</td></tr>
<tr><td>End</td><td>Move to the bottom of line.</td></tr>
</table>

<p>&lt;Search&gt;</p>
<table border="1">
<tr><td>f/F</td><td>Find First</td></tr>
<tr><td>n/N</td><td>Find Next</td></tr>
<tr><td>p/P</td><td>Find Previous</td></tr>
</table>

<p>&lt;Edit&gt;</p>
<table border="1">
<tr><td>a/A</td><td>Add an entry.</td></tr>
<tr><td>Enter</td><td>Edit ACLs of a domain at the cursor position. (Valid only for screen for domain listing.)</td></tr>
<tr><td>Space</td><td>Invert selection state of an entry at the cursor position.</td></tr>
<tr><td>c/C</td><td>Copy selection state of an entry at the cursor position to all entries below the cursor position.</td></tr>
<tr><td>d/D</td><td>Delete selected entries.</td></tr>
<tr><td>s/S</td><td>Set profile number of selected entries. (Valid only for screen for domain listing.)<br>
Set profile value for selected entries. (Valid only for screen for profile editing)<br>
Set new quota value for selected entries. (Valid only for screen for memory usage)</td></tr>
<tr><td>Insert</td><td>Copy an entry at the cursor position to history buffer.</td></tr>
</table>

<p>&lt;Misc&gt;</p>
<table border="1">
<tr><td>q/Q</td><td>Quit</td></tr>
<tr><td>r/R</td><td>Refresh</td></tr>
<tr><td>w/W</td><td>Switch to window list.</td></tr>
</table>

<p>A tutorial is available at <a href="tool-editpolicy.html.en">How to use Policy Editor</a>.</p>

<h3><a name="tomoyo-loadpolicy">&lt;Policy Loader "tomoyo-loadpolicy"&gt;</a></h3>
<p>Reloads the on-disk policy onto memory.</p>
<p>There are the following commandline parameters.</p>
<ul>
<li>e --- Reload exception policy.
<li>d --- Reload domain policy.
<li>a --- Reload the above two policies.
<li>f --- Erase on-memory policy before loading.
<li>p --- Reload profile. 'f' option is not supported.
<li>m --- Reload manager policy. 'f' option is not supported.
<li>u --- Set memory quota. 'f' option is not supported.
<li>- --- Read from stdin. Only one of 'e' 'd' 'p' 'm' 'u' is possible when using this option.
</ul>

<h3><a name="tomoyo-setlevel">&lt;Control Level Changer "tomoyo-setlevel"&gt;</a></h3>
<p>Changes the current control level (i.e. writing to /sys/kernel/security/tomoyo/profile ) and displays the new control level.</p>
<p>You can give the new control level from commandline parameter.</p>

<h3><a name="tomoyo-setprofile">&lt;Profile Selector "tomoyo-setprofile"&gt;</a></h3>
<p>Assigns a profile to domains.</p>
<p>You can give the new profile number and domainnames from the commandline parameter. The list of domainnames that the profile number assigned to has changed is printed.</p>

<h3><a name="tomoyo-pstree">&lt;Process Info Viewer "tomoyo-pstree"&gt;</a></h3>
<p>Lists the domainnames of currently running processes belong to and the profile numbers the domains currently assigned to.</p>
<p>This program shows the profile number, the name of process, PID, the domainname like "pstree" command.</p>

<h3><a name="tomoyo-savepolicy">&lt;Policy Saver "tomoyo-savepolicy"&gt;</a></h3>
<p>Saves the on-memory policy onto disk.</p>
<p>There are the following commandline parameters.</p>
<ul>
<li>e --- Save exception policy.
<li>d --- Save domain policy.
<li>a --- Save the above two policies.
<li>f --- Save even if on-memory policy and on-disk policy are same.
<li>p --- Save profile.
<li>m --- Save manager policy.
<li>u --- Write memory usage on stdout. Implies '-' option.
<li>- --- Write to stdout. Only one of 'e' 'd' 'p' 'm' 'u' is possible when using this option.
</ul>

<h3><a name="tomoyo-findtemp">&lt;Temporal Pathnames Detector "tomoyo-findtemp"&gt;</a></h3>
<p>Reads domain policy from standard input and checks the existence of pathnames, and dumps the nonexistent pathnames.</p>
<p>The nonexistent pathnames are likely used as temporary pathnames. So find the naming rules from similar nonexistent pathnames and append the pattern to /etc/tomoyo/exception_policy.conf and /sys/kernel/security/tomoyo/exception_policy .</p>
<p>You can pass the content of /etc/tomoyo/domain_policy.conf or /sys/kernel/security/tomoyo/domain_policy using redirection or pipes to the standard input of this program.</p>

<h3><a name="tomoyo-ld-watch">&lt;Library Pathnames Updater "tomoyo-ld-watch"&gt;</a></h3>
<p>Appends shared libraries to exception policy automatically using "allow_read" directive when the location of shared libraries in /etc/ld.so.cache has changed.</p>
<p>By running this program while updating packages, you can avoid errors "unable to start applications because shared libraries are unreadable" when the pathnames of shared libraries accessed by general programs has changed.</p>

<h3><a name="tomoyo-queryd">&lt;Delayed Enforcing Mode Handler "tomoyo-queryd"&gt;</a></h3>
<p>Detects policy violation and displays the access request. You can tell the system whether the access request should be granted (or granted and policy should be appended to grant the access request) or rejected after you validate the access request.</p>
<p>By running this program while updating packages, you can avoid errors due to insufficient permissions.</p>
<p>Never grant access requests unconditionally. The cause of policy violation is not always updating packages, but may by malicious requests by attackers. If you grant access requests caused by malicious requests by attackers, the system gets intruded.</p>

<h3><a name="tomoyo-notifyd">&lt;Policy Violation Notifyier "tomoyo-notifyd"&gt;</a></h3>
<p>Detects policy violation and take some actions (e.g. send a mail) to notify it to the administrator.</p>
<p>By running this program from /etc/crontab , you can know the occurrence of policy violation in enforcing mode as soon as possible.</p>

<h3><a name="tomoyo-checkpolicy">&lt;Policy Syntax Checker "tomoyo-checkpolicy"&gt;</a></h3>
<p>Reads policy files from standard input and checks syntaxes.</p>
<p>Prints errors with line numbers if any.</p>

<h3><a name="tomoyo-init">&lt;Initial Policy Loader "tomoyo-init"&gt;</a></h3>
<p>Loads policy files from /etc/tomoyo/ directory.</p>
<p>Put this program as /sbin/tomoyo-init , and this program will be invoked automatically when execution of /sbin/init is requested by initrd.</p>

<h3><a name="tomoyo-domainmatch">&lt;ACL Searcher "tomoyo-domainmatch"&gt;</a></h3>
<p>This is a "fgrep" for /sys/kernel/security/tomoyo/domain_policy .</p>

<h3><a name="tomoyo-patternize">&lt;Pathname Pattern Replacer "tomoyo-patternize"&gt;</a></h3>
<p>Reads domain policy from standard input and replaces pathnames with patterns if the pathname matches to patterns given at commandline and writes to standard output. Pathnames that contains execute permission and domainnames won't be patterned.</p>

<h3><a name="init_policy">&lt;Policy Template Generator "init_policy"&gt;</a></h3>
<p>Generates templates for policy. You need to review the output because automatically generated policy may contain redundant or dangerous entries.</p>

<hr>

<p><a href="index.html.en">Return to index page.</a></p>
<p><a href="https://osdn.jp/"><img src="https://osdn.jp/sflogo.php?group_id=1973" width="96" height="31" alt="sflogo.php" title="SourceForge.jp"></a></p>
</body>
</html>
