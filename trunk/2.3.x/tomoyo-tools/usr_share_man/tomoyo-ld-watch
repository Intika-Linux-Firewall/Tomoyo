#! /bin/sh

if [ "$1" = "--version" ]
then
cat << EOF
tomoyo-ld-watch 1.7.2

Copyright (C) 2005-2010 NTT DATA CORPORATION.

This program is free software; you may redistribute it under the terms of
the GNU General Public License. This program has absolutely no warranty.
EOF
elif [ "$1" = "--help" ]
then
cat << EOF
Usage: tomoyo-ld-watch

Appends shared libraries to exception policy automatically using "allow_read" directive when the location of shared libraries in /etc/ld.so.cache has changed.

By running this program while updating packages, you can avoid errors "unable to start applications because shared libraries are unreadable" when the pathnames of shared libraries accessed by general programs has changed.

Examples:

# tomoyo-ld-watch

EOF
else
cat << EOF | help2man -i - -N -s 8 -n "Update TOMOYO Linux's library's pathnames automatically" $0 | gzip -9 > man8/tomoyo-ld-watch.8.gz
[SEE ALSO]

 tomoyo-queryd (8)

[NOTES]

 You need to register either path to this program ( /usr/sbin/tomoyo-ld-watch ) or a domain for this program in /sys/kernel/security/tomoyo/manager before invoking this program.

 This program is obsolete. You can run tomoyo-queryd instead of running this program.

[AUTHORS]

 penguin-kernel _at_ I-love.SAKURA.ne.jp

EOF
fi
exit 0
